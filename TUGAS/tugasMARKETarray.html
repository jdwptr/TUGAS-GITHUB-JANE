<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRUIT MARKET</title>
</head>

<body>
    <script>
        let produk = ['APPLE üçé', 'ORANGE üçä', 'GRAPE üçá']
        let harga = [10000, 20000, 30000]
        let stok = [10, 20, 30]
        
        //SHOW ALERT MENU
        function showMenu () {
            let menu = 'SELAMAT DATANG DI TOKO BUAH \n'
            for (let i = 0; i < produk.length; i++) {
                menu += `${i + 1}. ${produk[i]} Harga Rp ${harga[i]},00 \n`
            }
            alert(menu)
        }
        
        //SHOW DETAIL BELANJA
        // - buat function show detail belanja
        // - buat function minta input
        // - buat function kurangi stok

main : while (true) {
        /*alert(`
        DAFTAR HARGA TOKO :
        APPLE üçé STOCK : ${stok[0]} HARGA Rp ${harga[0]},00
        ORANGE üçä STOCK : ${stok[1]} HARGA Rp ${harga[1]},00
        GRAPE üçá STOCK : ${stok[2]} HARGA Rp ${harga[2]},00
        `)*/
        showMenu()
        
        let qty = new Array(produk.length)
        apelloop :while (true) {
            qty[0] = parseInt(prompt(`Masukan Jumlah Appleüçé yang akan dibeli`))
            if (qty[0] > stok[0]) {
                alert("Apple üçé is out of stock")
            } else if (isNaN(qty[0])) {
                alert('wrong input')
            } else {
                break apelloop
            }
        }

        orangeloop : while (true) {
            qty[1] = parseInt(prompt(`Masukan Jumlah Orangeüçä yang akan dibeli`))
            if (qty[1] > stok[1]) {
                alert("Orangeüçä is out of stock")
            } else if (isNaN(qty[1])) {
                alert('wrong input')
            } else {
                break orangeloop
            }
        }
        
        anggurloop : while (true) {
            qty[2] = parseInt(prompt(`Masukan Jumlah Grapeüçá yang akan dibeli`))
            if (qty[2] > stok[2]) {
                alert("Grapeüçá is out of stock")
            } else if (isNaN(qty[2])) {
                alert('wrong input')
            } else {
                break anggurloop
            }
        }
        

        //CALCULATE TOTAL
        let totalApple = qty[0] * harga[0]
        let totalOrange = qty[1] * harga[1]
        let totalAnggur = qty[2] * harga[2]

        let total = [totalApple, totalOrange, totalAnggur]
        
        let totalBelanja = total.reduce((a, b) => a + b)
        
        let appleSisa = stok[0] - qty[0]
        let orangeSisa = stok[1] - qty[1]
        let anggurSisa = stok[2] - qty[2]

        //STOK DIKURANGI SEBELOM ALERT STOK TERAKHIR (PAKAI LOOP ATAU MANUAL)

        alert(`
        TOTAL APPLEüçé${total[0]}
        TOTAL ORANGEüçä${total[1]}
        TOTAL ANGGURüçá${total[2]}
        TOTAL BELANJA üçéüçäüçá${totalBelanja}
        `)

        //VARIABEL UNTUK INPUT HARGA BELANJA
        alert (`
        JUMLAH HARUS DIBAYAR : ${totalBelanja}
        `)
        
        //UNTUK CEK SISA BAYAR DLL
        //let kembalianBayar = inputBayar - totalBelanja
        //let inputBayar = 0
        bayarloop : while (true) {
            let inputBayar = parseInt(prompt('MASUKAN JUMLAH UANG UNTUK PEMBAYARAN'))
            let kembalianBayar = inputBayar - totalBelanja
            if (inputBayar < totalBelanja) {
                alert(`JUMLAH YANG HARUS DIBAYAR ${totalBelanja}`)
            } else if (inputBayar >= totalBelanja) {
                alert(`JUMLAH KEMBALIAN ANDA ${kembalianBayar}`)
            } else if (isNaN(inputBayar)) {
                alert(`INPUT HARUS DIISI`)
            }
            break bayarloop 
        }

        alert(`
        SISA STOCK üçé${appleSisa}
        SISA STOCK üçä${orangeSisa}
        SISA STOCK üçá${anggurSisa}
        `)

        let confirmation = confirm(`APAKAH MAU BELANJA LAGI`)
        if (confirmation == true) {
        } else if (confirmation == false) {
            break main
        }
    }
 
    </script>
</body>

</html>